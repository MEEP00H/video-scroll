<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>video scroll</title>
    <meta property="og:description" content='Scroll-based HTML5 Video' />
    <meta property="og:type" content="website" />
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
    <meta property="og:image" content="og_image.jpg" />

    <meta property="og:url" content='https://meep00h.github.io/video-scroll/' />

    <link rel="stylesheet" href="main.css">
</head>

<body>
    <div class="app">
        <div id="bound-one" class="scroll-bound">
            <div class="content">
                <video>
                    <source src="https://d2btxpp3s2xrq5.cloudfront.net/intro_extended.webm" type="video/webm">
                </video>
            </div>
        </div>
    </div>

    <script>
        const registerVideo = (bound, video) => {
            bound = document.querySelector(bound);
            video = document.querySelector(video);
            const scrollVideo = () => {
                if (video.duration) {
                    const distanceFromTop = window.scrollY + bound.getBoundingClientRect().top;
                    const rawPercentScrolled = (window.scrollY - distanceFromTop) / (bound.scrollHeight - window.innerHeight);
                    const percentScrolled = Math.min(Math.max(rawPercentScrolled, 0), 1);
                    video.currentTime = (video.duration * percentScrolled);
                }

                requestAnimationFrame(scrollVideo);
            }
            requestAnimationFrame(scrollVideo);
        }


        registerVideo("#bound-one", "#bound-one video");
        registerVideo("#bound-two", "#bound-two video");




    </script>
</body>

</html>